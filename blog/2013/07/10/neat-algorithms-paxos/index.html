
<!doctype html>
<!--[if lt IE 7]><html <?php language_attributes(); ?> class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html <?php language_attributes(); ?> class="no-js lt-ie9 lt-ie8"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html <?php language_attributes(); ?> class="no-js lt-ie9"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"><!--<![endif]-->
	<head>
		<meta charset="utf-8">
    <title>Neat Algorithms - Paxos - Will You Harry Me</title>

		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

		<meta name="HandheldFriendly" content="True">
		<meta name="MobileOptimized" content="320">
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  
  <link rel="canonical" href="http://harry.me/blog/2013/07/10/neat-algorithms-paxos">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/style.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/assets/fonts/font-awesome.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=Crimson+Text|Ubuntu:400,700" rel="stylesheet" type="text/css">
  <!--[if lt IE 9]>
  <link href="/stylesheets/ie.css" media="screen, projection" rel="stylesheet" type="text/css">
  <![endif]-->

  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="72x72"   href="/images/apple-touch-icon-72x72-precomposed.png">
  <link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">

  <script type="text/javascript" src="/javascripts/modernizr.custom.min.js"></script>
  <script type="text/javascript" src="/javascripts/jquery-1.9.1.min.js"></script>
  <script type="text/javascript" src="/javascripts/jquery.imagesloaded.min.js"></script>

  
  <script type="text/javascript">
    var Harry = {};
  </script>
	</head>


<body class="blog ">
  <div id="container">
    <header class="header" role="banner">
      <div id="inner-header" class="wrap clearfix">
        <div class="logo">
          <h1><a href="/" rel="nofollow">Will You Harry Me?</a></h1>
        </div>

        <div class="menu">
          <nav role="navigation">
            <a class="toggleMenu" href="#" style="display: inline-block;"><i class="icon-reorder"></i></a>
            <ul id="menu-main" class="nav top-nav clearfix">
              <li class="menu-item menu-item-home"><a href="/">Home</a></li>
              <li class="menu-item"><a href="/about/">About</a></li>
            </ul>
          </nav>
        </div>
      </div>
    </header>

    
<div id="featured-wrap">
  <img src="/images/headers/paxos.jpg" class="attachment-creer-full wp-post-image" />
  <div class="feature-credit">photo credit: <a href="http://analogromance.tumblr.com/">Carter Brundage</a></div>
</div>



<div id="content" class="single">
  <div id="inner-content" class="wrap clearfix">
    <div id="main" class="twelvecol clearfix" role="main">
      <article class="clearfix post" role="article" itemscope itemtype="http://schema.org/BlogPosting">
        <header class="article-header pushfourcol">
          <span class="published">








  




<time datetime="2013-07-10T12:41:00-04:00" pubdate data-updated="true">Jul 10<span>th</span>, 2013</time></span>
          <h1 class="entry-title single-title" itemprop="headline">Neat Algorithms - Paxos</h1>
        </header>

        <section class="entry-content clearfix" itemprop="articleBody">
          <div id="postmeta" class="fourcol first clearfix">
            <p class="byline vcard">

            <span class="byline author vcard">
                
                  
                
                By <a href="/about/" rel="author">Harry Brundage</a>
              </span>

              
              
              
                

<span class="categories">
  Concerning: 
  
    <a class='category' href='/blog/categories/misc/'>misc</a>
  
</span>


              
              <span class="count">Words: <strong>666</strong></span>
              </p>

            
              <p class="share">
  
  <span class="facebook">
    <span class="facebook"><a href="http://www.facebook.com/sharer.php?u=http://harry.me/blog/2013/07/10/neat-algorithms-paxos/&t=Neat Algorithms - Paxos" target="blank"><i class="icon-facebook"></i></a>
  </span>
  
  
  <span class="twitter">
    <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://harry.me/blog/2013/07/10/neat-algorithms-paxos/" data-via="harrybrundage" data-counturl="http://harry.me/blog/2013/07/10/neat-algorithms-paxos/" ><i class="icon-twitter"></i></a>
  </span>
  
</p>

            
          </div>

          <div id="post-content">
            <p>This is an article on and demonstration of an extraordinarily neat algorithm called Paxos. Paxos is a strategy for teaching a whole bunch of decidedly unreliable processes to reliably decide on stuff. More formally: it allows a group of potentially faulty processors to deterministically and safely reach consensus if Paxos&#8217; conditions are met while ensuring processors remain consistent if consensus can&#8217;t be reached.</p>

<div id="main_demo"></div>


<h1>Paxos: something we can agree on.</h1>

<p>Paxos is an algorithm to solve the consensus problem. Honest-to-goodness real-life implementations of Paxos can be found at the heart of world class software like Apache Zookeeper, Google&#8217;s magnificent Spanner database, and also their distributed locking service Chubby.</p>

<p>The algorithm satisfies the following conditions:</p>

<ul>
<li>Only values which are sent to the system can become a new, agreed upon value for the system (duh?)</li>
</ul>


<p>This property albeit obvious is important: you don&#8217;t want your system somehow reporting a value that was never set in the first place.</p>

<ul>
<li>Values can only become the new value for the system if consensus can be reached</li>
</ul>


<p>This is the &#8220;safety&#8221; property of the whole system: unless a majority of members of the system can agree that a potential value is actually the real value, the potential value won&#8217;t ever become the real value.</p>

<p>Lets get some definitions out of the way so that if you explore the literature on the topic you can know what people are talking about:</p>

<ul>
<li><code>process</code>: one of the computers in the system. Also known as a replica.</li>
<li><code>client</code>: a computer not in the system who is asking the system what the value is or to take on a new value.</li>
<li><code>proposal</code>: the thing generated by a client asking the system to take on a new value. Note that proposals may succeed or fail.</li>
<li><code>acceptance</code>: the act of one of the processes in the system deciding to take on a new value, or &#8220;accept&#8221; it as true.</li>
</ul>


<h1>The guts</h1>

<p>Let&#8217;s examine what Paxos makes our cluster of processes do when a client asks that a new value be written:</p>

<ul>
<li>A client of the Paxos governed system asks that a new value be set. The client here shows up as the pink circle, and the processes show up as the squares. Paxos makes a guarantee that the client can send their write request to any member of the Paxos cluster, so it picks one at random in this case.</li>
</ul>


<div id="client_demo"></div>


<ul>
<li>The Paxos process that recieves the write request &#8220;proposes&#8221; this new value to the system by sending a <code>prepare</code> message to all the other processes it knows of.</li>
</ul>


<div id="prepare_demo"></div>


<p>This <code>prepare</code> message holds what&#8217;s called a <em>sequence number</em> inside it. The sequence number declares that the receiving process should prepare to accept a proposal with that sequence number. Each process which receives the <code>prepare</code> message can either reply with a <code>promise</code> message or nothing at all.</p>

<ul>
<li>These receiving processes make the critical check in the system: that they&#8217;ve never seen a sequence number higher than the one held in the incoming <code>prepare</code> message. If they haven&#8217;t, then they can be sure that this is the newest proposal, and promise that they&#8217;ll accept it. If they have seen something higher, they know there is a newer proposal out on the loose, and can reply telling the out-of-date proposer that they are as such.</li>
</ul>


<div id="promise_demo"></div>


<p>Paxos solves the problem of consensus over time by taking hold of time itself. Every time a process submits a value the system they associate with it a strictly increasing sequence number and associate the <code>prepare</code> (and as we&#8217;ll see later, <code>accept</code>) messages with it. Using this number, a process in the system can identify in what order the messages it received were created, and apply temporal precedence.</p>

<ul>
<li>The proposing process waits for the other processes to promise to accept only its proposal or a higher numbered one. Upon receiving promises from a majority of processes, the proposing process issues an <code>accept</code> message decreeing that they now store the proposed value associated with the sequence number in the proposal.</li>
</ul>


<div id="accept_demo"></div>




<script type="text/javascript" src="/assets/paxos/paxos-9a2408ac3246fe5d4a9484f02c811349.js"></script>


<p><link rel="stylesheet" type="text/css" href="/assets/paxos-1626bbae8d93c1ee47f06661a44136bb.css"></p>

          </div>
        </section>

        <footer class="article-footer clearfix">
          <nav id="post-entries" class="clearfix">
            
            <div class="nav-prev fl">
              <a rel="prev" href="/blog/2013/07/07/id-like-to-have-an-argument-a-primer-on-consensus/" title="Previous Post: I'd like to have an argument: A primer on consensus">
                <span class="meta">Previous</span>
                <span class="link">I'd like to have an argument: A primer on consensus</span>
              </a>
            </div>
            
            
          </nav>
        </footer>

        

        <div class="eightcol last clearfix">
          
        </div>
      </article> <!-- end article -->
    </div>
  </div> <!-- end #inner-content -->
</div> <!-- end #content -->


    <footer class="footer" role="contentinfo">
    <div id="inner-footer" class="wrap clearfix">
      <nav role="navigation">
        <ul id="menu-footer" class="nav footer-nav clearfix">
          <li class="menu-item"><a href="/">Home</a></li>
          <li class="menu-item"><a href="/about/">About</a></li>
          <li class="menu-item"><a href="/archives/">Archives</a></li>
          <li class="menu-item"><a href="mailto:harry.brundage+site@gmail.com">Contact</a></li>
        </ul>
      </nav>
    </div>
  </footer>
</div>

<a href="#" id="back-to-top"><i class="icon-angle-up"></i></a>
<script type="text/javascript" src="/javascripts/jquery.fitvids.js"></script>
<script type="text/javascript" src="/javascripts/scripts.js"></script>
<script type="text/javascript" src="/javascripts/nav.js"></script>
<script type="text/javascript" src="/javascripts/jquery.infinitescroll.min.js"></script>



</body>
</html>

